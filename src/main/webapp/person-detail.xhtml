<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	template="/WEB-INF/templates/adminTemplate.xhtml">
	<ui:define name="content">
		<h1>Persons management</h1>
		<h2>Person detail</h2>
		<h4>Addresses to display:
			#{personDetailController.personsAddresses}</h4>
		<h:form>
			<h:commandButton
				action="#{personUpdateController.startPersonUpdate(personDetailController.person.id)}"
				value="Update person" />
		</h:form>
		<table>
			<tr>
				<th style="text-align: right;">
					<h:outputText value="#{msg['person.create.personid']}:" />
				</th>
				<td>
					<h:outputText value="#{personDetailController.person.businessId}" />
				</td>
			</tr>
			<tr>
				<th style="text-align: right;">
					<h:outputText value="#{msg['person.create.name']}:" />
				</th>
				<td>
					<h:outputText value="#{personDetailController.person.firstName}" />
				</td>
			</tr>
			<tr>
				<th style="text-align: right;">
					<h:outputText value="#{msg['person.create.surname']}:" />
				</th>
				<td>
					<h:outputText value="#{personDetailController.person.lastName}" />
				</td>
			</tr>
			<tr>
				<th style="text-align: right;">
					<h:outputText value="#{msg['person.create.othernames']}:" />
				</th>
				<td>
					<h:outputText value="#{personDetailController.person.otherNames}" />
				</td>
			</tr>
			<tr>
				<th style="text-align: right;">
					<h:outputText value="#{msg['person.create.born']}:" />
				</th>
				<td>
					<h:outputText value="#{personDetailController.person.birthDate}" />
				</td>
			</tr>
			<tr>
				<th style="text-align: right;">
					<h:outputText value="#{msg['person.create.legalid']}:" />
				</th>
				<td>
					<h:outputText value="#{personDetailController.person.legalId}" />
				</td>
			</tr>
			<tr>
				<th style="text-align: right;">
					<h:outputText value="#{msg['person.create.phone']}:" />
				</th>
				<td>
					<h:outputText value="#{personDetailController.person.phone}" />
				</td>
			</tr>
			<tr>
				<th style="text-align: right;">
					<h:outputText value="#{msg['person.create.email']}:" />
				</th>
				<td>
					<h:outputText value="#{personDetailController.person.email}" />
				</td>
			</tr>
		</table>

		<h2>Person's addresses</h2>

		<h:form>
			<h:commandButton
				action="#{personAddressController.startAddressCreation(personDetailController.person)}"
				value="Create new address" />
		</h:form>

		<h:dataTable rendered="true" var="address"
			value="#{personDetailController.personsAddresses}">
			<h:column>
				<f:facet name="header">Address type</f:facet>
    				#{address.addressType}
    			</h:column>
			<h:column>
				<f:facet name="header">Country</f:facet>
    				#{address.address.country.code}
    			</h:column>
			<h:column>
				<f:facet name="header">City</f:facet>
    				#{address.address.city}
    			</h:column>
			<h:column>
				<f:facet name="header">Street</f:facet>
    				#{address.address.streetName}, #{address.address.streetNumber}  
    			</h:column>
			<h:column>
				<f:facet name="header">Flat number</f:facet>
    				#{address.address.flatNumber}
    			</h:column>
		</h:dataTable>
		<h2>Person's contracts</h2>
	</ui:define>
</ui:composition>
