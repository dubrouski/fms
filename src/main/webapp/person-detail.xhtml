<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/person-management-template.xhtml">
	<ui:define name="content">
		<p:growl id="msgs" showDetail="true" />
		<p:commandButton style="margin-bottom:10px;"
			action="#{personDeletionController.requestPersonDelete(personDetailController.person)}"
			value="Delete person" icon="ui-icon-closethick" />
		<p:fieldset collapsed="false" legend="Personal information"
			toggleable="true" toggleSpeed="250" style="margin-bottom:15px;">
			<p:commandButton style="float:right; margin-bottom:10px;"
				action="#{personUpdateController.startPersonUpdate(personDetailController.person)}"
				value="Update person" icon="ui-icon-pencil" />
			<p:panelGrid columns="3" layout="grid">
				<h:outputText
					value="#{msg['person.create.personid']}: #{personDetailController.person.businessId}" />
				<h:outputText
					value="#{msg['person.create.legalid']}: #{personDetailController.person.legalId}" />
				<h:outputText
					value="#{msg['person.create.born']}: #{personDetailController.person.birthDate}" />

				<h:outputText
					value="#{msg['person.create.name']}: #{personDetailController.person.firstName}" />
				<h:outputText
					value="#{msg['person.create.othernames']}: #{personDetailController.person.otherNames}" />
				<h:outputText
					value="#{msg['person.create.surname']}: #{personDetailController.person.lastName}" />

				<h:outputText
					value="#{msg['person.create.phone']}: #{personDetailController.person.phone}" />
				<h:outputText
					value="#{msg['person.create.email']}: #{personDetailController.person.email}" />
			</p:panelGrid>

		</p:fieldset>

		<p:fieldset collapsed="false" legend="Addresses" toggleable="true"
			toggleSpeed="250" style="margin-bottom:15px;">
			<p:ajax event="toggle"
				listener="#{personDetailController.loadAddresses}"
				update="personAddressesTable" />

			<p:commandButton style="float:right; margin-bottom:10px;"
				action="#{personAddressController.startAddressCreation(personDetailController.person)}"
				value="Create new address" icon="ui-icon-plusthick" />

			<p:dataTable style="clear:both;" id="personAddressesTable" rendered="true" var="address"
				value="#{personService.getAddressesForPerson(personDetailController.person)}">
				<p:column headerText="Address type">
					<h:outputText value="#{address.addressType}" />
				</p:column>
				<p:column headerText="Country">
					<h:outputText
						value="#{msg['country.'.concat(address.address.country.code)]}" />
				</p:column>
				<p:column headerText="City">
					<h:outputText value="#{address.address.city}" />
				</p:column>
				<p:column headerText="Street">
					<h:outputText
						value="#{address.address.streetName}, #{address.address.streetNumber}" />
				</p:column>
				<p:column headerText="Flat number">
					<h:outputText value="#{address.address.flatNumber}" />
				</p:column>
				<p:column headerText="Active">
					<h:outputText value="#{address.active}" />
				</p:column>
			</p:dataTable>
		</p:fieldset>


		<p:fieldset collapsed="true" legend="Contracts" toggleable="true"
			toggleSpeed="250" style="margin-bottom:15px;">
			<h:panelGrid columns="2" cellpadding="10">
				<h:outputText value="Person's contracts list goes here" />
			</h:panelGrid>
		</p:fieldset>

	</ui:define>
</ui:composition>
